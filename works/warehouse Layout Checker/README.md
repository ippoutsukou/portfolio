# 倉庫保管レイアウト検証アプリ（PoC）

オフラインで動作するブラウザアプリです。倉庫の通路・障害物・荷物（パレット等）をSVGで可視化し、領域分割に基づく敷き詰めで保管数を自動算出します。

## 特長
- HTML+Vanilla JSのみ、ローカルで実行（インストール不要）
- 1mグリッド描画、ドラッグ移動、通路/障害物の四隅ハンドルでリサイズ
- 自動配置（指定向き／最適）
  - 指定向き: 領域分割＋実寸ピッチで各セルを詰める
  - 最適: 縦/横/最密（セルごとに向き混在）を比較し最も多い案を採用
- PNG/SVG保存に加え、JSON保存/読込、CSVエクスポート/インポート
  - JSONは「荷物も含める」オプション対応

## 使い方（ローカル実行）
1. フォルダを開く: `新しいフォルダー (7)`
2. `index.html` を Chrome / Edge で開く（ダブルクリックでOK）
3. 左パネルで倉庫寸法・荷物寸法・向き・段積み数を設定
4. 通路/障害物/荷物を追加・編集（ドラッグ移動、ハンドルでリサイズ）
5. 「自動配置」または「自動配置（最適）」で荷物を敷き詰め
6. 右パネルで結果を確認し、必要に応じてPNG/SVG保存、JSON/CSVでレイアウト保存

## 自動配置の挙動
- 領域分割: 通路/障害物の境界で倉庫をセルに分割
- 指定向き（自動配置）: 各セル左上を起点に、荷物サイズそのままのピッチで敷き詰め
- 最適: 
  - 全体縦（指定サイズ）、全体横（W/H入れ替え）、最密（セルごとに縦横を選択）の3案を比較
  - 平面配置数が最大の案を採用（トーストに採用案を表示）
- スナップは移動/リサイズ時のみ有効で、自動配置には適用しません

## 保存/読み込み
- PNG/SVG: 現在の描画を画像保存（`WLC_YYYYMMDD_HHMMSS.*`）
- JSON: 倉庫サイズ・通路・障害物（オプションで荷物）を保存/読込（`WLC_LAYOUT_YYYYMMDD_HHMMSS.json`）
  - 読み込み時、「荷物も含める」がONなら荷物も復元、OFFなら通路/障害物のみ
- CSV: 通路・障害物のみ入出力（ヘッダ: `type,x,y,w,h`）

## 操作とショートカット
- 左クリック: オブジェクト選択
- ドラッグ: 通路/障害物/荷物の移動（スナップONで1m吸着）
- 四隅ハンドル: 通路/障害物のリサイズ（スナップON可）
- Rキー / 「選択荷物を90°回転」: 荷物を90°回転（衝突判定あり）
- Delete / Backspace: 選択オブジェクトを削除

## 制約・注意
- 向きは0°/90°のみ（任意角回転は未対応）
- 領域が細分化されると計算時間が増える場合あり
- 100×100m超など極端に大きい倉庫は描画/計算パフォーマンスに注意

## 構成
- `index.html`: UIとSVGキャンバス
- `app.js`: 描画・操作・自動配置・保存ロジック
- `README.md`: 本ドキュメント

## 推奨環境
- Chrome / Edge 最新版（ローカル実行、ネット接続不要）

## ライセンス/著作権
- 本PoCは社内検証用途を想定。外部公開時は別途ライセンスをご検討ください。
